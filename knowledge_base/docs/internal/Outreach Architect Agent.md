---
original_file: "Outreach Architect Agent"
processed_date: 2026-02-02T15:28:41.695706
type: document_extraction
---

# Document Extraction: Outreach Architect Agent

# Outreach Architect Agent

## Overview

The **Outreach Architect** is a Tier-1 Revenue Enabler agent for Charter & Stone. It converts Deep Dive Analyst intelligence into actionable, pre-qualified cold outreach sequences tailored to institutional distress levels.

**What it does:**
- Reads prospect profiles (JSON) generated by the Deep Dive Analyst
- Validates profiles against schema v1.0.0
- Generates 3-stage email sequences (Cold Intro → Value Add → Break-up)
- Adjusts tone and timing cadence based on distress level
- Scans all emails for forbidden vendor-speak phrases
- Outputs polished Markdown files ready for human review

**Why it matters:**
Charter & Stone's competitive advantage is *speed-to-insight*. The Analyst can generate a diagnostic dossier in <1 second. The Outreach Architect extends that advantage into the sales pipeline by producing *pre-qualified, context-aware* outreach at machine speed.

---

## Architecture

```
agents/outreach/
├── outreach.py                      # Main orchestrator class
├── config/
│   ├── system_prompt.txt            # Claude system prompt (Charter & Stone voice)
│   └── prompts/                     # (Reserved for future template expansion)
├── outputs/                         # Generated Markdown email sequences
├── logs/                            # Execution logs
└── README.md                        # This file
```

---

## Installation & Dependencies

### Prerequisites
- Python 3.8+
- Virtual environment (see charter-and-stone-automation/.venv)
- Anthropic API key (set in `.env`)

### Install Dependencies
```bash
cd ~/charter-and-stone-automation
source venv/bin/activate
pip install anthropic jsonschema
```

### Environment Setup
Add to `.env`:
```
ANTHROPIC_API_KEY=your_api_key_here
```

---

## Usage

### CLI Interface
```bash
cd ~/charter-and-stone-automation

# Source environment and run
ANTHROPIC_API_KEY=$(grep "^ANTHROPIC_API_KEY=" .env | cut -d= -f2) \
  python agents/outreach/outreach.py <path_to_profile.json>
```

### Example
```bash
ANTHROPIC_API_KEY=$(grep "^ANTHROPIC_API_KEY=" .env | cut -d= -f2) \
  python agents/outreach/outreach.py knowledge_base/prospects/albright_college_profile.json
```

### Output
- **Status:** Success/failure summary
- **File Path:** Location of generated Markdown
- **Distress Level:** Prospect's risk classification
- **Violations:** Any forbidden phrases found (warnings only)

---

## Input Schema (v1.0.0)

The agent expects a `prospect_profile.json` with this structure:

```json
{
  "meta": {
    "schema_version": "1.0.0"
  },
  "institution": {
    "name": "string",
    "type": "string",
    "location": {
      "city": "string",
      "state": "string"
    }
  },
  "financials": {
    "calculated": {
      "expense_ratio": "number | null",
      "runway_years": "number | null",
      "tuition_dependency": "number | null"
    }
  },
  "signals": {
    "distress_level": "critical | elevated | watch | stable",
    "indicators": [
      {
        "type": "string",
        "signal": "string",
        "severity": "string"
      }
    ]
  },
  "leadership": {
    "key_contacts": [
      {
        "name": "string",
        "title": "string"
      }
    ]
  },
  "blinded_presentation": {
    "display_name": "string"
  }
}
```

### Schema Validation
The agent will **reject profiles** if:
- Schema version is not `1.0.0`
- Required fields are missing
- Data types don't match

---

## Distress-Level Triage Logic

### Stable
**Action:** Abort generation  
**Reason:** Stable institutions do not warrant cold outreach

### Watch
**Tone:** Advisory touch  
**Cadence:** 0-7-14 days  
**Email 1 Focus:** Early warning tone, offer diagnostic value

### Elevated
**Tone:** Strategic warning  
**Cadence:** 0-5-10 days  
**Email 1 Focus:** Acknowledge mounting pressure, peer-to-peer positioning

### Critical
**Tone:** Urgent intervention  
**Cadence:** 0-3-7 days (fastest cadence)  
**Email 1 Focus:** Hook on immediate crisis, establish urgency  
**Email 2 Bonus:** Reference WVU cautionary tale for context

---

## Email Generation Rules

### Email 1: Cold Intro (Day 0)
**Goal:** Establish credibility and urgency without sounding like a vendor

- **Subject:** Reference a specific fact (e.g., "Re: Your 12% enrollment decline")
- **Hook:** Acknowledge distress signal without judgment
- **Offer:** "We ran a financial diagnostic on your institution"
- **CTA:** "Would a 20-minute conversation be useful?"
- **Forbidden:** No generic "I wanted to reach out..." openings

### Email 2: Value Add (Day 5-7 if no response)
**Goal:** Provide concrete intelligence to establish credibility

- **Share:** 1-2 specific financial insights (expense ratio, runway, tuition dependency)
- **Frame:** Peer-to-peer intelligence sharing, NOT a sales pitch
- **Reiterate:** "This is not a vendor call. It is a diagnostic conversation."
- **Critical instances:** Reference WVU cautionary tale if distress_level == "critical"

### Email 3: Break-up (Day 10-14 if no response)
**Goal:** Exit with dignity, leave door open

- **Tone:** Professional respect, no guilt trips
- **Message:** "I haven't heard back, so I'll assume this isn't the right time"
- **Offer:** "If your situation changes, reach out anytime"
- **Forbidden:** NO "Was my previous email unclear?" or desperate follow-ups

---

## Forbidden Phrases

The agent scans ALL email content for these vendor-speak patterns and warns if found:

```
- "I wanted to reach out..."
- "Circling back..."
- "Just checking in..."
- "Leveraging our platform..."
- "Thought leadership..."
- "Best-in-class solutions..."
- "Your transformation journey..."
- "synergy"
- "holistic"
- "leverage"
- "transformation"
- "let's schedule a demo"
- "I have solutions for you"
```

**Quality Gate:** If forbidden phrases are detected, the agent flags them in the output. Human review is recommended before sending.

---

## Output Format

Generated files are saved as `[institution_name]_outreach_sequence.md` in `agents/outreach/outputs/`

### Structure
```markdown
# Outreach Sequence: [Institution Name]
**Generated:** [ISO timestamp]
**Distress Level:** [critical/elevated/watch]
**Target Contact:** [Name, Title]

---

## Email 1: Cold Intro
**Subject:** [Subject line]
**Timing:** Day 0

[Email body]

---

## Email 2: Value Add
**Subject:** [Subject line]
**Timing:** Day 5-7

[Email body]

---

## Email 3: Break-up
**Subject:** [Subject line]
**Timing:** Day 10-14

[Email body]

---

## Analyst Notes
[Strategic context and engagement recommendations]

---

## Quality Control
✓ All emails passed forbidden phrase validation.
[Financial metrics summary]
```

---

## API Integration

### LLM Engine
- **Provider:** Anthropic
- **Model:** Claude 3.5 Sonnet (claude-3-5-sonnet-20241022)
- **Max tokens:** 2000
- **System prompt:** `agents/outreach/config/system_prompt.txt`

### Request Flow
1. Agent loads prospect profile JSON
2. Validates against schema
3. Determines distress triage (tone + cadence)
4. Builds user prompt with institution context
5. Calls Anthropic API with system + user prompts
6. Parses JSON response (email_1, email_2, email_3, analysis)
7. Scans for forbidden phrases
8. Generates Markdown output
9. Saves to `agents/outreach/outputs/`

---

## Error Handling

### Common Errors

| Error | Cause | Solution |
|-------|-------|----------|
| `ANTHROPIC_API_KEY not set` | Missing environment variable | Add to `.env` and source |
| `Schema validation failed` | Profile doesn't match v1.0.0 | Check analyst output format |
| `Stable institution` | distress_level == "stable" | Normal (abort is expected) |
| `No JSON found in response` | API response malformed | Check model availability |
| `File not found` | Invalid profile path | Verify path exists |

### Logging
All execution details are logged to `agents/outreach/logs/outreach.log`:
- Profile validation results
- API call details
- Forbidden phrase findings
- Output file location

---

## Workflow Integration

### Upstream: Deep Dive Analyst
- Generates `prospect_profile.json` with schema v1.0.0
- Saves to `knowledge_base/prospects/[name]_profile.json`

### Downstream: Sales Team
- Aaron/Amanda review Markdown output
- Approve/edit/reject emails
- Send via email client
- Track responses

### Future Enhancements
- [ ] Bulk processing (multiple prospects)
- [ ] Teams webhook notification on generation
- [ ] CRM integration (Salesforce/HubSpot sync)
- [ ] A/B testing framework (subject line variants)
- [ ] Response tracking dashboard

---

## Testing

### Test with Sample Profile
```bash
# Albright College (elevated distress)
ANTHROPIC_API_KEY=$(grep "^ANTHROPIC_API_KEY=" .env | cut -d= -f2) \
  python agents/outreach/outreach.py knowledge_base/prospects/albright_college_profile.json
```

### Verify Output
```bash
cat agents/outreach/outputs/albright_college_outreach_sequence.md
```

---

## Acceptance Criteria

- [x] Agent processes ANY schema-compliant profile.json
- [x] Generated emails contain ZERO forbidden phrases (or flagged for review)
- [x] Distress level dictates tone (critical = urgent, watch = advisory)
- [x] Human reviewer can approve/edit/reject without touching code
- [x] Error handling for missing fields, invalid distress_level, no contacts
- [x] Logging captures all execution details
- [x] Markdown output is publication-ready

---

## Code Structure

### Main Class: `OutreachArchitect`

**Key Methods:**
- `__init__()` - Initialize Anthropic client, load system prompt
- `validate_profile()` - Schema validation against v1.0.0
- `check_forbidden_phrases()` - Scan for vendor-speak
- `get_distress_triage()` - Map distress level → tone + cadence
- `build_generation_prompt()` - Construct user prompt with context
- `generate_emails()` - Call Anthropic API, parse JSON response
- `validate_email_content()` - Check generated emails for violations
- `generate_markdown_output()` - Assemble final Markdown file
- `process_prospect()` - Main orchestrator (load → validate → generate → save)

**CLI Entry Point:**
- `main()` - Parse arguments, error handling, execution summary

---

## Development Notes

### Adding Custom Tone Profiles
To add new distress-level definitions, update `get_distress_triage()`:
```python
"new_level": {
    "tone": "tone_descriptor",
    "timing_days": [0, X, Y],
    "cadence_description": "Email cadence (0-X-Y days)"
}
```

### Customizing System Prompt
Edit `agents/outreach/config/system_prompt.txt` to refine:
- Voice and philosophy
- Email generation rules
- Quality check criteria
- Output format expectations

### Adding Forbidden Phrases
Update the `FORBIDDEN_PHRASES` list in `outreach.py`:
```python
FORBIDDEN_PHRASES = [
    "existing phrases...",
    "your_new_phrase_here"
]
```

---

## Support & Questions

For issues or enhancements:
1. Check logs: `agents/outreach/logs/outreach.log`
2. Review system prompt: `agents/outreach/config/system_prompt.txt`
3. Validate input profile against schema
4. Test with sample Albright College profile

---

**Agent Status:** ✓ Production Ready  
**Last Updated:** 2026-02-02  
**Version:** 1.0.0

